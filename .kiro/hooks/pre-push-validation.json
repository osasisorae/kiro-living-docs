{
  "name": "pre-push-validation",
  "description": "Validate documentation consistency before pushing changes",
  "version": "1.0.0",
  "trigger": {
    "type": "git-hook",
    "event": "pre-push",
    "conditions": {
      "filePatterns": [
        "src/**/*",
        ".kiro/specs/**/*",
        "README.md"
      ],
      "branchPatterns": [
        "main",
        "master",
        "develop",
        "release/*"
      ]
    }
  },
  "action": {
    "type": "subagent-execution",
    "subagent": "doc-analysis-agent",
    "command": "validate-documentation",
    "parameters": {
      "validationLevel": "strict",
      "checkConsistency": true,
      "validateLinks": true,
      "checkExamples": true,
      "requireUpToDate": true
    },
    "timeout": 45000,
    "retryAttempts": 1
  },
  "context": {
    "branch": "${GIT_BRANCH}",
    "remoteUrl": "${GIT_REMOTE_URL}",
    "changedFiles": "${GIT_CHANGED_FILES}",
    "timestamp": "${TIMESTAMP}"
  },
  "logging": {
    "enabled": true,
    "logLevel": "warn",
    "logFile": ".kiro/development-log/validation.log",
    "includeContext": true,
    "includeOutput": true,
    "consoleOutput": true
  },
  "errorHandling": {
    "onFailure": "block-push",
    "notificationChannels": [],
    "fallbackActions": [
      {
        "type": "create-validation-report",
        "outputFile": ".kiro/development-log/validation-report.md"
      }
    ]
  },
  "configuration": {
    "enabled": true,
    "priority": "critical",
    "concurrent": false,
    "dependencies": [
      "doc-analysis-agent"
    ]
  },
  "validation": {
    "rules": [
      {
        "name": "api-docs-current",
        "description": "API documentation matches current implementation",
        "severity": "error"
      },
      {
        "name": "readme-examples-valid",
        "description": "README examples are syntactically correct",
        "severity": "error"
      },
      {
        "name": "links-accessible",
        "description": "All documentation links are accessible",
        "severity": "warning"
      },
      {
        "name": "specs-complete",
        "description": "Feature specifications are complete and consistent",
        "severity": "warning"
      }
    ]
  }
}